{"ast":null,"code":"import _assertThisInitialized from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _get from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowToggle(openings, closingSelector) {\n  return function (source) {\n    return source.lift(new WindowToggleOperator(openings, closingSelector));\n  };\n}\nvar WindowToggleOperator = /*#__PURE__*/function () {\n  function WindowToggleOperator(openings, closingSelector) {\n    _classCallCheck(this, WindowToggleOperator);\n    this.openings = openings;\n    this.closingSelector = closingSelector;\n  }\n  _createClass(WindowToggleOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    }\n  }]);\n  return WindowToggleOperator;\n}();\nvar WindowToggleSubscriber = /*#__PURE__*/function (_OuterSubscriber) {\n  _inherits(WindowToggleSubscriber, _OuterSubscriber);\n  var _super = _createSuper(WindowToggleSubscriber);\n  function WindowToggleSubscriber(destination, openings, closingSelector) {\n    var _this;\n    _classCallCheck(this, WindowToggleSubscriber);\n    _this = _super.call(this, destination);\n    _this.openings = openings;\n    _this.closingSelector = closingSelector;\n    _this.contexts = [];\n    _this.add(_this.openSubscription = subscribeToResult(_assertThisInitialized(_this), openings, openings));\n    return _this;\n  }\n  _createClass(WindowToggleSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      var contexts = this.contexts;\n      if (contexts) {\n        var len = contexts.length;\n        for (var i = 0; i < len; i++) {\n          contexts[i].window.next(value);\n        }\n      }\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(err) {\n      var contexts = this.contexts;\n      this.contexts = null;\n      if (contexts) {\n        var len = contexts.length;\n        var index = -1;\n        while (++index < len) {\n          var context = contexts[index];\n          context.window.error(err);\n          context.subscription.unsubscribe();\n        }\n      }\n      _get(_getPrototypeOf(WindowToggleSubscriber.prototype), \"_error\", this).call(this, err);\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      var contexts = this.contexts;\n      this.contexts = null;\n      if (contexts) {\n        var len = contexts.length;\n        var index = -1;\n        while (++index < len) {\n          var context = contexts[index];\n          context.window.complete();\n          context.subscription.unsubscribe();\n        }\n      }\n      _get(_getPrototypeOf(WindowToggleSubscriber.prototype), \"_complete\", this).call(this);\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var contexts = this.contexts;\n      this.contexts = null;\n      if (contexts) {\n        var len = contexts.length;\n        var index = -1;\n        while (++index < len) {\n          var context = contexts[index];\n          context.window.unsubscribe();\n          context.subscription.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"notifyNext\",\n    value: function notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n      if (outerValue === this.openings) {\n        var closingNotifier;\n        try {\n          var closingSelector = this.closingSelector;\n          closingNotifier = closingSelector(innerValue);\n        } catch (e) {\n          return this.error(e);\n        }\n        var window = new Subject();\n        var subscription = new Subscription();\n        var context = {\n          window: window,\n          subscription: subscription\n        };\n        this.contexts.push(context);\n        var innerSubscription = subscribeToResult(this, closingNotifier, context);\n        if (innerSubscription.closed) {\n          this.closeWindow(this.contexts.length - 1);\n        } else {\n          innerSubscription.context = context;\n          subscription.add(innerSubscription);\n        }\n        this.destination.next(window);\n      } else {\n        this.closeWindow(this.contexts.indexOf(outerValue));\n      }\n    }\n  }, {\n    key: \"notifyError\",\n    value: function notifyError(err) {\n      this.error(err);\n    }\n  }, {\n    key: \"notifyComplete\",\n    value: function notifyComplete(inner) {\n      if (inner !== this.openSubscription) {\n        this.closeWindow(this.contexts.indexOf(inner.context));\n      }\n    }\n  }, {\n    key: \"closeWindow\",\n    value: function closeWindow(index) {\n      if (index === -1) {\n        return;\n      }\n      var contexts = this.contexts;\n      var context = contexts[index];\n      var window = context.window,\n        subscription = context.subscription;\n      contexts.splice(index, 1);\n      window.complete();\n      subscription.unsubscribe();\n    }\n  }]);\n  return WindowToggleSubscriber;\n}(OuterSubscriber);","map":{"version":3,"names":["Subject","Subscription","OuterSubscriber","subscribeToResult","windowToggle","openings","closingSelector","source","lift","WindowToggleOperator","_classCallCheck","_createClass","key","value","call","subscriber","subscribe","WindowToggleSubscriber","_OuterSubscriber","_inherits","_super","_createSuper","destination","_this","contexts","add","openSubscription","_assertThisInitialized","_next","len","length","i","window","next","_error","err","index","context","error","subscription","unsubscribe","_get","_getPrototypeOf","prototype","_complete","complete","_unsubscribe","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","closingNotifier","e","push","innerSubscription","closed","closeWindow","indexOf","notifyError","notifyComplete","inner","splice"],"sources":["/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/rxjs/_esm2015/internal/operators/windowToggle.js"],"sourcesContent":["import { Subject } from '../Subject';\nimport { Subscription } from '../Subscription';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowToggle(openings, closingSelector) {\n    return (source) => source.lift(new WindowToggleOperator(openings, closingSelector));\n}\nclass WindowToggleOperator {\n    constructor(openings, closingSelector) {\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new WindowToggleSubscriber(subscriber, this.openings, this.closingSelector));\n    }\n}\nclass WindowToggleSubscriber extends OuterSubscriber {\n    constructor(destination, openings, closingSelector) {\n        super(destination);\n        this.openings = openings;\n        this.closingSelector = closingSelector;\n        this.contexts = [];\n        this.add(this.openSubscription = subscribeToResult(this, openings, openings));\n    }\n    _next(value) {\n        const { contexts } = this;\n        if (contexts) {\n            const len = contexts.length;\n            for (let i = 0; i < len; i++) {\n                contexts[i].window.next(value);\n            }\n        }\n    }\n    _error(err) {\n        const { contexts } = this;\n        this.contexts = null;\n        if (contexts) {\n            const len = contexts.length;\n            let index = -1;\n            while (++index < len) {\n                const context = contexts[index];\n                context.window.error(err);\n                context.subscription.unsubscribe();\n            }\n        }\n        super._error(err);\n    }\n    _complete() {\n        const { contexts } = this;\n        this.contexts = null;\n        if (contexts) {\n            const len = contexts.length;\n            let index = -1;\n            while (++index < len) {\n                const context = contexts[index];\n                context.window.complete();\n                context.subscription.unsubscribe();\n            }\n        }\n        super._complete();\n    }\n    _unsubscribe() {\n        const { contexts } = this;\n        this.contexts = null;\n        if (contexts) {\n            const len = contexts.length;\n            let index = -1;\n            while (++index < len) {\n                const context = contexts[index];\n                context.window.unsubscribe();\n                context.subscription.unsubscribe();\n            }\n        }\n    }\n    notifyNext(outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (outerValue === this.openings) {\n            let closingNotifier;\n            try {\n                const { closingSelector } = this;\n                closingNotifier = closingSelector(innerValue);\n            }\n            catch (e) {\n                return this.error(e);\n            }\n            const window = new Subject();\n            const subscription = new Subscription();\n            const context = { window, subscription };\n            this.contexts.push(context);\n            const innerSubscription = subscribeToResult(this, closingNotifier, context);\n            if (innerSubscription.closed) {\n                this.closeWindow(this.contexts.length - 1);\n            }\n            else {\n                innerSubscription.context = context;\n                subscription.add(innerSubscription);\n            }\n            this.destination.next(window);\n        }\n        else {\n            this.closeWindow(this.contexts.indexOf(outerValue));\n        }\n    }\n    notifyError(err) {\n        this.error(err);\n    }\n    notifyComplete(inner) {\n        if (inner !== this.openSubscription) {\n            this.closeWindow(this.contexts.indexOf(inner.context));\n        }\n    }\n    closeWindow(index) {\n        if (index === -1) {\n            return;\n        }\n        const { contexts } = this;\n        const context = contexts[index];\n        const { window, subscription } = context;\n        contexts.splice(index, 1);\n        window.complete();\n        subscription.unsubscribe();\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}