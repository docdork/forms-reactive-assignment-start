{"ast":null,"code":"import _inherits from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport _classCallCheck from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { Subject } from '../Subject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowWhen(closingSelector) {\n  return function windowWhenOperatorFunction(source) {\n    return source.lift(new WindowOperator(closingSelector));\n  };\n}\nvar WindowOperator = /*#__PURE__*/function () {\n  function WindowOperator(closingSelector) {\n    _classCallCheck(this, WindowOperator);\n    this.closingSelector = closingSelector;\n  }\n  _createClass(WindowOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n    }\n  }]);\n  return WindowOperator;\n}();\nvar WindowSubscriber = /*#__PURE__*/function (_OuterSubscriber) {\n  _inherits(WindowSubscriber, _OuterSubscriber);\n  var _super = _createSuper(WindowSubscriber);\n  function WindowSubscriber(destination, closingSelector) {\n    var _this;\n    _classCallCheck(this, WindowSubscriber);\n    _this = _super.call(this, destination);\n    _this.destination = destination;\n    _this.closingSelector = closingSelector;\n    _this.openWindow();\n    return _this;\n  }\n  _createClass(WindowSubscriber, [{\n    key: \"notifyNext\",\n    value: function notifyNext(_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n      this.openWindow(innerSub);\n    }\n  }, {\n    key: \"notifyError\",\n    value: function notifyError(error) {\n      this._error(error);\n    }\n  }, {\n    key: \"notifyComplete\",\n    value: function notifyComplete(innerSub) {\n      this.openWindow(innerSub);\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      this.window.next(value);\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(err) {\n      this.window.error(err);\n      this.destination.error(err);\n      this.unsubscribeClosingNotification();\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      this.window.complete();\n      this.destination.complete();\n      this.unsubscribeClosingNotification();\n    }\n  }, {\n    key: \"unsubscribeClosingNotification\",\n    value: function unsubscribeClosingNotification() {\n      if (this.closingNotification) {\n        this.closingNotification.unsubscribe();\n      }\n    }\n  }, {\n    key: \"openWindow\",\n    value: function openWindow() {\n      var innerSub = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      if (innerSub) {\n        this.remove(innerSub);\n        innerSub.unsubscribe();\n      }\n      var prevWindow = this.window;\n      if (prevWindow) {\n        prevWindow.complete();\n      }\n      var window = this.window = new Subject();\n      this.destination.next(window);\n      var closingNotifier;\n      try {\n        var closingSelector = this.closingSelector;\n        closingNotifier = closingSelector();\n      } catch (e) {\n        this.destination.error(e);\n        this.window.error(e);\n        return;\n      }\n      this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n    }\n  }]);\n  return WindowSubscriber;\n}(OuterSubscriber);","map":{"version":3,"names":["Subject","OuterSubscriber","subscribeToResult","windowWhen","closingSelector","windowWhenOperatorFunction","source","lift","WindowOperator","_classCallCheck","_createClass","key","value","call","subscriber","subscribe","WindowSubscriber","_OuterSubscriber","_inherits","_super","_createSuper","destination","_this","openWindow","notifyNext","_outerValue","_innerValue","_outerIndex","_innerIndex","innerSub","notifyError","error","_error","notifyComplete","_next","window","next","err","unsubscribeClosingNotification","_complete","complete","closingNotification","unsubscribe","arguments","length","undefined","remove","prevWindow","closingNotifier","e","add"],"sources":["/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/rxjs/_esm2015/internal/operators/windowWhen.js"],"sourcesContent":["import { Subject } from '../Subject';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function windowWhen(closingSelector) {\n    return function windowWhenOperatorFunction(source) {\n        return source.lift(new WindowOperator(closingSelector));\n    };\n}\nclass WindowOperator {\n    constructor(closingSelector) {\n        this.closingSelector = closingSelector;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new WindowSubscriber(subscriber, this.closingSelector));\n    }\n}\nclass WindowSubscriber extends OuterSubscriber {\n    constructor(destination, closingSelector) {\n        super(destination);\n        this.destination = destination;\n        this.closingSelector = closingSelector;\n        this.openWindow();\n    }\n    notifyNext(_outerValue, _innerValue, _outerIndex, _innerIndex, innerSub) {\n        this.openWindow(innerSub);\n    }\n    notifyError(error) {\n        this._error(error);\n    }\n    notifyComplete(innerSub) {\n        this.openWindow(innerSub);\n    }\n    _next(value) {\n        this.window.next(value);\n    }\n    _error(err) {\n        this.window.error(err);\n        this.destination.error(err);\n        this.unsubscribeClosingNotification();\n    }\n    _complete() {\n        this.window.complete();\n        this.destination.complete();\n        this.unsubscribeClosingNotification();\n    }\n    unsubscribeClosingNotification() {\n        if (this.closingNotification) {\n            this.closingNotification.unsubscribe();\n        }\n    }\n    openWindow(innerSub = null) {\n        if (innerSub) {\n            this.remove(innerSub);\n            innerSub.unsubscribe();\n        }\n        const prevWindow = this.window;\n        if (prevWindow) {\n            prevWindow.complete();\n        }\n        const window = this.window = new Subject();\n        this.destination.next(window);\n        let closingNotifier;\n        try {\n            const { closingSelector } = this;\n            closingNotifier = closingSelector();\n        }\n        catch (e) {\n            this.destination.error(e);\n            this.window.error(e);\n            return;\n        }\n        this.add(this.closingNotification = subscribeToResult(this, closingNotifier));\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}