{"ast":null,"code":"import _classCallCheck from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { Action } from './Action';\nexport var AsyncAction = /*#__PURE__*/function (_Action) {\n  _inherits(AsyncAction, _Action);\n  var _super = _createSuper(AsyncAction);\n  function AsyncAction(scheduler, work) {\n    var _this;\n    _classCallCheck(this, AsyncAction);\n    _this = _super.call(this, scheduler, work);\n    _this.scheduler = scheduler;\n    _this.work = work;\n    _this.pending = false;\n    return _this;\n  }\n  _createClass(AsyncAction, [{\n    key: \"schedule\",\n    value: function schedule(state) {\n      var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      if (this.closed) {\n        return this;\n      }\n      this.state = state;\n      var id = this.id;\n      var scheduler = this.scheduler;\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, delay);\n      }\n      this.pending = true;\n      this.delay = delay;\n      this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n      return this;\n    }\n  }, {\n    key: \"requestAsyncId\",\n    value: function requestAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n  }, {\n    key: \"recycleAsyncId\",\n    value: function recycleAsyncId(scheduler, id) {\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      if (delay !== null && this.delay === delay && this.pending === false) {\n        return id;\n      }\n      clearInterval(id);\n      return undefined;\n    }\n  }, {\n    key: \"execute\",\n    value: function execute(state, delay) {\n      if (this.closed) {\n        return new Error('executing a cancelled action');\n      }\n      this.pending = false;\n      var error = this._execute(state, delay);\n      if (error) {\n        return error;\n      } else if (this.pending === false && this.id != null) {\n        this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n      }\n    }\n  }, {\n    key: \"_execute\",\n    value: function _execute(state, delay) {\n      var errored = false;\n      var errorValue = undefined;\n      try {\n        this.work(state);\n      } catch (e) {\n        errored = true;\n        errorValue = !!e && e || new Error(e);\n      }\n      if (errored) {\n        this.unsubscribe();\n        return errorValue;\n      }\n    }\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var id = this.id;\n      var scheduler = this.scheduler;\n      var actions = scheduler.actions;\n      var index = actions.indexOf(this);\n      this.work = null;\n      this.state = null;\n      this.pending = false;\n      this.scheduler = null;\n      if (index !== -1) {\n        actions.splice(index, 1);\n      }\n      if (id != null) {\n        this.id = this.recycleAsyncId(scheduler, id, null);\n      }\n      this.delay = null;\n    }\n  }]);\n  return AsyncAction;\n}(Action);","map":{"version":3,"names":["Action","AsyncAction","_Action","_inherits","_super","_createSuper","scheduler","work","_this","_classCallCheck","call","pending","_createClass","key","value","schedule","state","delay","arguments","length","undefined","closed","id","recycleAsyncId","requestAsyncId","setInterval","flush","bind","clearInterval","execute","Error","error","_execute","errored","errorValue","e","unsubscribe","_unsubscribe","actions","index","indexOf","splice"],"sources":["/Users/davidholliday/Desktop/forms-reactive-assignment-start/node_modules/rxjs/_esm2015/internal/scheduler/AsyncAction.js"],"sourcesContent":["import { Action } from './Action';\nexport class AsyncAction extends Action {\n    constructor(scheduler, work) {\n        super(scheduler, work);\n        this.scheduler = scheduler;\n        this.work = work;\n        this.pending = false;\n    }\n    schedule(state, delay = 0) {\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        const id = this.id;\n        const scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    }\n    requestAsyncId(scheduler, id, delay = 0) {\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    }\n    recycleAsyncId(scheduler, id, delay = 0) {\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    }\n    execute(state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        const error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    }\n    _execute(state, delay) {\n        let errored = false;\n        let errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    }\n    _unsubscribe() {\n        const id = this.id;\n        const scheduler = this.scheduler;\n        const actions = scheduler.actions;\n        const index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}